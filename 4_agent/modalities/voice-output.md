---
icon: volume
---

# Voice Output (Speech)

Generate natural speech from text using AI-powered text-to-speech.

## Overview

Voice output enables your agent to speak responses:

- **Text-to-Speech** - Convert text to natural speech
- **Multiple Voices** - Choose from various voice options
- **Provider Support** - OpenAI TTS, ElevenLabs, and more
- **Streaming** - Real-time audio streaming
- **High Quality** - Natural, human-like voices

## Basic Usage

### Speak Text

```csharp
using UnityEngine;
using Glitch9.AIDevKit.Agents;

public class VoiceOutput : MonoBehaviour
{
    private Agent agent;
    
    async void Start()
    {
        agent = new Agent(new AgentConfiguration
        {
            EnableVoiceOutput = true,
            VoiceId = \"alloy\"  // OpenAI voice\n        });\n        \n        await agent.InitializeAsync();\n    }\n    \n    async void SpeakGreeting()\n    {\n        await agent.SpeakAsync(\"Hello! How can I help you today?\");\n    }\n}\n```\n\n### Auto-Speak Responses\n\n```csharp\npublic class AutoSpeakAgent : MonoBehaviour\n{\n    private Agent agent;\n    \n    async void Start()\n    {\n        agent = new Agent(new AgentConfiguration\n        {\n            EnableVoiceOutput = true,\n            AutoSpeakResponses = true  // Automatically speak all responses\n        });\n        \n        await agent.InitializeAsync();\n        \n        // Agent will automatically speak the response\n        await agent.SendMessageAsync(\"Tell me a joke\");\n    }\n}\n```\n\n## Voice Selection\n\n### OpenAI Voices\n\n```csharp\n// Male voices\nagent.SetVoice(\"onyx\");   // Deep, authoritative\nagent.SetVoice(\"echo\");   // Clear, neutral\n\n// Female voices\nagent.SetVoice(\"alloy\");  // Neutral, balanced\nagent.SetVoice(\"nova\");   // Warm, friendly\nagent.SetVoice(\"shimmer\"); // Upbeat, energetic\n\n// Gender-neutral\nagent.SetVoice(\"fable\");  // Expressive, storytelling\n```\n\n### ElevenLabs Voices\n\n```csharp\n// Configure ElevenLabs\nvar config = new AgentConfiguration\n{\n    VoiceProvider = AiProvider.ElevenLabs,\n    VoiceId = \"21m00Tcm4TlvDq8ikWAM\",  // Rachel\n    ElevenLabsVoiceStability = 0.5f,\n    ElevenLabsVoiceSimilarity = 0.75f\n};\n\nAgent agent = new Agent(config);\n```\n\n### Change Voice at Runtime\n\n```csharp\npublic class VoiceSelector : MonoBehaviour\n{\n    private Agent agent;\n    \n    public void SelectVoice(string voiceId)\n    {\n        agent.SetVoice(voiceId);\n        \n        // Test the voice\n        agent.SpeakAsync($\"Hello, I'm {voiceId}\");\n    }\n}\n```\n\n## Speech Settings\n\n### Speed Control\n\n```csharp\n// Slower speed\nawait agent.SpeakAsync(text, speed: 0.75f);\n\n// Normal speed\nawait agent.SpeakAsync(text, speed: 1.0f);\n\n// Faster speed\nawait agent.SpeakAsync(text, speed: 1.25f);\n```\n\n### Volume Control\n\n```csharp\n// Quiet\nawait agent.SpeakAsync(text, volume: 0.5f);\n\n// Normal\nawait agent.SpeakAsync(text, volume: 1.0f);\n\n// Loud\nawait agent.SpeakAsync(text, volume: 1.5f);\n```\n\n### Voice Settings (ElevenLabs)\n\n```csharp\n// Configure voice characteristics\nagent.Configuration.ElevenLabsVoiceStability = 0.5f;   // 0-1 (higher = more consistent)\nagent.Configuration.ElevenLabsVoiceSimilarity = 0.75f; // 0-1 (higher = closer to original)\nagent.Configuration.ElevenLabsVoiceStyle = 0.0f;       // 0-1 (exaggeration)\n```\n\n## Audio Output\n\n### Play Through AudioSource\n\n```csharp\npublic class SpeechPlayer : MonoBehaviour\n{\n    private Agent agent;\n    private AudioSource audioSource;\n    \n    void Start()\n    {\n        audioSource = gameObject.AddComponent<AudioSource>();\n        \n        agent = new Agent(new AgentConfiguration\n        {\n            EnableVoiceOutput = true,\n            AudioSource = audioSource  // Use specified AudioSource\n        });\n    }\n}\n```\n\n### Get Audio Clip\n\n```csharp\n// Generate speech AudioClip\nAudioClip audioClip = await agent.GenerateSpeechAsync(\"Hello world\");\n\n// Play manually\naudioSource.clip = audioClip;\naudioSource.Play();\n\n// Or save to file\nSaveAudioClip(audioClip, \"speech.wav\");\n```\n\n### Streaming Audio\n\n```csharp\npublic class StreamingSpeech : MonoBehaviour\n{\n    private Agent agent;\n    \n    async void Start()\n    {\n        agent = new Agent(new AgentConfiguration\n        {\n            EnableVoiceOutput = true,\n            StreamAudioOutput = true  // Enable streaming\n        });\n        \n        await agent.InitializeAsync();\n        \n        // Audio chunks are played as they arrive\n        agent.OnAudioChunkReceived += (chunk) => {\n            // Optional: Process audio chunk\n        };\n        \n        await agent.SpeakAsync(\"This is a long sentence that will be streamed.\");\n    }\n}\n```\n\n## Events\n\n```csharp\n// Speech generation started\nagent.OnSpeechGenerationStarted += (text) => {\n    Debug.Log($\"Generating speech: {text}\");\n    ShowSpeakingIndicator();\n};\n\n// Speech playback started\nagent.OnSpeechStarted += () => {\n    Debug.Log(\"Started speaking\");\n    ShowSpeakingAnimation();\n};\n\n// Speech progress\nagent.OnSpeechProgress += (progress) => {\n    UpdateProgressBar(progress);  // 0.0 to 1.0\n};\n\n// Speech paused\nagent.OnSpeechPaused += () => {\n    Debug.Log(\"Speech paused\");\n    PauseSpeakingAnimation();\n};\n\n// Speech resumed\nagent.OnSpeechResumed += () => {\n    Debug.Log(\"Speech resumed\");\n    ResumeSpeakingAnimation();\n};\n\n// Speech completed\nagent.OnSpeechCompleted += () => {\n    Debug.Log(\"Finished speaking\");\n    HideSpeakingIndicator();\n};\n\n// Speech cancelled\nagent.OnSpeechCancelled += () => {\n    Debug.Log(\"Speech cancelled\");\n    ResetSpeakingState();\n};\n\n// Speech failed\nagent.OnSpeechFailed += (error) => {\n    Debug.LogError($\"Speech failed: {error.Message}\");\n    ShowErrorMessage(error.Message);\n};\n```\n\n## Playback Control\n\n### Pause and Resume\n\n```csharp\npublic class SpeechControls : MonoBehaviour\n{\n    private Agent agent;\n    \n    public async void Play()\n    {\n        await agent.SpeakAsync(\"This is a long message that can be paused.\");\n    }\n    \n    public void Pause()\n    {\n        agent.PauseSpeech();\n    }\n    \n    public void Resume()\n    {\n        agent.ResumeSpeech();\n    }\n    \n    public void Stop()\n    {\n        agent.StopSpeech();\n    }\n}\n```\n\n### Queue Management\n\n```csharp\n// Queue multiple speeches\nawait agent.SpeakAsync(\"First message\", queue: true);\nawait agent.SpeakAsync(\"Second message\", queue: true);\nawait agent.SpeakAsync(\"Third message\", queue: true);\n\n// Or interrupt current speech\nawait agent.SpeakAsync(\"Important! Interrupting!\", queue: false);\n\n// Clear queue\nagent.ClearSpeechQueue();\n```\n\n## Use Cases\n\n### NPC Dialogue\n\n```csharp\npublic class NPCDialogue : MonoBehaviour\n{\n    private Agent agent;\n    \n    public async void SpeakDialogue(string dialogue)\n    {\n        // Display text\n        dialogueText.text = dialogue;\n        \n        // Speak with character voice\n        agent.SetVoice(npcVoiceId);\n        await agent.SpeakAsync(dialogue);\n    }\n}\n```\n\n### Narration\n\n```csharp\npublic class Narrator : MonoBehaviour\n{\n    private Agent agent;\n    \n    public async void NarrateScene(string[] sentences)\n    {\n        foreach (string sentence in sentences)\n        {\n            await agent.SpeakAsync(sentence, queue: true);\n            await Task.Delay(500);  // Pause between sentences\n        }\n    }\n}\n```\n\n### Accessibility\n\n```csharp\npublic class ScreenReader : MonoBehaviour\n{\n    private Agent agent;\n    \n    public async void ReadUIElement(GameObject element)\n    {\n        string text = GetElementText(element);\n        await agent.SpeakAsync(text);\n    }\n    \n    public async void ReadNotification(string message)\n    {\n        // Interrupt current speech for important notifications\n        await agent.SpeakAsync(message, queue: false);\n    }\n}\n```\n\n### Voice Assistant\n\n```csharp\npublic class VoiceAssistant : MonoBehaviour\n{\n    private Agent agent;\n    \n    public async void RespondToUser(string userInput)\n    {\n        // Get AI response\n        var response = await agent.SendMessageAsync(userInput);\n        \n        // Speak the response\n        await agent.SpeakAsync(response.Content);\n    }\n}\n```\n\n## Text Processing\n\n### SSML Support\n\n```csharp\n// Use SSML for advanced control (provider-dependent)\nstring ssml = @\"\n<speak>\n    <prosody rate='slow'>\n        This is spoken slowly.\n    </prosody>\n    <break time='1s'/>\n    <prosody pitch='high'>\n        This is spoken with high pitch.\n    </prosody>\n</speak>\";\n\nawait agent.SpeakAsync(ssml, format: SpeechFormat.SSML);\n```\n\n### Text Cleaning\n\n```csharp\npublic string PrepareTextForSpeech(  string text)\n{\n    // Remove markdown\n    text = RemoveMarkdown(text);\n    \n    // Expand abbreviations\n    text = text.Replace(\"e.g.\", \"for example\");\n    text = text.Replace(\"i.e.\", \"that is\");\n    \n    // Handle numbers\n    text = text.Replace(\"1st\", \"first\");\n    text = text.Replace(\"2nd\", \"second\");\n    \n    // Remove URLs\n    text = Regex.Replace(text, @\"https?://\\S+\", \"link\");\n    \n    return text;\n}\n```\n\n### Break Long Text\n\n```csharp\npublic async void SpeakLongText(string longText)\n{\n    // Split into sentences\n    string[] sentences = SplitIntoSentences(longText);\n    \n    foreach (string sentence in sentences)\n    {\n        // Queue each sentence\n        await agent.SpeakAsync(sentence, queue: true);\n    }\n}\n```\n\n## Performance Optimization\n\n### Caching\n\n```csharp\nprivate Dictionary<string, AudioClip> speechCache = new Dictionary<string, AudioClip>();\n\npublic async Task SpeakWithCache(string text)\n{\n    if (speechCache.TryGetValue(text, out AudioClip cached))\n    {\n        // Use cached audio\n        audioSource.clip = cached;\n        audioSource.Play();\n    }\n    else\n    {\n        // Generate and cache\n        AudioClip audio = await agent.GenerateSpeechAsync(text);\n        speechCache[text] = audio;\n        \n        audioSource.clip = audio;\n        audioSource.Play();\n    }\n}\n```\n\n### Pre-generation\n\n```csharp\n// Pre-generate common phrases\nasync void Start()\n{\n    string[] commonPhrases = new[]\n    {\n        \"Welcome!\",\n        \"How can I help you?\",\n        \"Thank you\",\n        \"Goodbye\"\n    };\n    \n    foreach (string phrase in commonPhrases)\n    {\n        AudioClip audio = await agent.GenerateSpeechAsync(phrase);\n        speechCache[phrase] = audio;\n    }\n}\n```\n\n## Best Practices\n\n### 1. Provide Visual Feedback\n\n```csharp\nagent.OnSpeechStarted += () => {\n    speakingIcon.enabled = true;\n    lipSyncAnimator.SetBool(\"Speaking\", true);\n};\n\nagent.OnSpeechCompleted += () => {\n    speakingIcon.enabled = false;\n    lipSyncAnimator.SetBool(\"Speaking\", false);\n};\n```\n\n### 2. Handle Interruptions\n\n```csharp\npublic async void SpeakWithInterruption(string text)\n{\n    // Stop current speech\n    if (agent.IsSpeaking)\n    {\n        agent.StopSpeech();\n    }\n    \n    // Speak new text\n    await agent.SpeakAsync(text);\n}\n```\n\n### 3. Match Voice to Character\n\n```csharp\npublic class Character : MonoBehaviour\n{\n    [SerializeField] private string voiceId;\n    [SerializeField] private float speechSpeed = 1.0f;\n    private Agent agent;\n    \n    public async void Speak(string text)\n    {\n        agent.SetVoice(voiceId);\n        await agent.SpeakAsync(text, speed: speechSpeed);\n    }\n}\n```\n\n### 4. Clean Text Before Speaking\n\n```csharp\npublic async void SpeakMessage(string rawText)\n{\n    // Remove special characters\n    string cleanText = PrepareTextForSpeech(rawText);\n    \n    // Speak cleaned text\n    await agent.SpeakAsync(cleanText);\n}\n```\n\n## Cost Optimization\n\n```csharp\n// Monitor usage\nagent.OnSpeechGenerated += (audioLength) => {\n    float cost = CalculateSpeechCost(audioLength);\n    Debug.Log($\"Speech cost: ${cost}\");\n};\n\n// Cache frequently used phrases\nif (IsCommonPhrase(text))\n{\n    await SpeakWithCache(text);\n}\nelse\n{\n    await agent.SpeakAsync(text);\n}\n\n// Use cheaper providers for non-critical speech\nif (isBackgroundNarration)\n{\n    agent.Configuration.VoiceProvider = AiProvider.OpenAI;  // Cheaper\n}\nelse\n{\n    agent.Configuration.VoiceProvider = AiProvider.ElevenLabs;  // Higher quality\n}\n```\n\n## Limitations\n\n- **Text Length**: Maximum 4096 characters per request\n- **Latency**: 500ms-2s delay for generation\n- **Languages**: Varies by provider\n- **Emotions**: Limited emotional expression\n- **Pronunciation**: May mispronounce uncommon words\n\n## Troubleshooting\n\n### No Audio Output\n\n```csharp\n// Check if AudioSource is configured\nif (agent.Configuration.AudioSource == null)\n{\n    Debug.LogError(\"No AudioSource configured\");\n}\n\n// Check if audio is muted\nif (audioSource.mute)\n{\n    audioSource.mute = false;\n}\n\n// Check volume\nif (audioSource.volume == 0)\n{\n    audioSource.volume = 1.0f;\n}\n```\n\n### Poor Voice Quality\n\n```csharp\n// Use higher quality voice\nagent.SetVoice(\"nova\");  // OpenAI HD voices\n\n// Or switch to ElevenLabs\nagent.Configuration.VoiceProvider = AiProvider.ElevenLabs;\n\n// Adjust voice settings\nagent.Configuration.ElevenLabsVoiceStability = 0.6f;\nagent.Configuration.ElevenLabsVoiceSimilarity = 0.8f;\n```\n\n### Speech Cutting Off\n\n```csharp\n// Ensure AudioClip is fully loaded\nawait agent.SpeakAsync(text);\nawait Task.Delay(100);  // Small delay before next action\n\n// Or wait for completion\nagent.OnSpeechCompleted += () => {\n    // Proceed with next action\n};\n```\n\n## Next Steps\n\n- Learn about [Voice Input (Transcription)](voice-input.md)\n- Explore [Image Generation](image-output.md)\n- Configure [Audio Setup](../essentials/configuration/audio-setup.md)\n